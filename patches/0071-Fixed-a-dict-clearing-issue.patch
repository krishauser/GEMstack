From ed5db7875f0b7e8f637d9d4cde4d553470527b5d Mon Sep 17 00:00:00 2001
From: LucasEby <lucaseby@outlook.com>
Date: Sun, 23 Feb 2025 12:19:30 -0500
Subject: [PATCH 071/150] Fixed a dict clearing issue

---
 GEMstack/onboard/perception/pedestrian_detection.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/GEMstack/onboard/perception/pedestrian_detection.py b/GEMstack/onboard/perception/pedestrian_detection.py
index 1f6c1eb9..ee041d3a 100644
--- a/GEMstack/onboard/perception/pedestrian_detection.py
+++ b/GEMstack/onboard/perception/pedestrian_detection.py
@@ -137,7 +137,6 @@ class PedestrianDetector2D(Component):
             # self.start_pose_abs = vehicle.pose # Store first pose which is start frame
             # self.start_pose_abs.to_frame(frame=ObjectFrameEnum.GLOBAL, current_pose=)
         # self.current_vehicle_pose_sf = vehicle.pose # Vehicle pose in start frame
-        self.current_agents.clear()
         return self.current_agents
 
     # TODO: Improve Algo Knn, ransac, etc.
@@ -284,6 +283,7 @@ class PedestrianDetector2D(Component):
     # TODO: Moving Average across last N iterations pos/vel? Less spurious vals
     # TODO Fix velocity calculation to calculate in ObjectFrameEnum.START
     def find_vels_and_ids(self, agents: List[AgentState]):
+        self.current_agents.clear()
         # Nothing was scanned, erase current (for current output) and previous list (for next time through because nothing was scanned)
         if (len(agents) == 0):
             self.current_agents = {}
-- 
2.38.1

